stage('Lancement jobs parall√®les') {
    parallel {



        stage(" CLONE DU PROJET"){
            steps{
                //install git
                sh 'apt-get update && apt-get install -y git'
                //remove repo folder if exists
                sh "rm -rf rep"
                //clone the repo
                echo 'version du git'
                //clone the repo
                sh "git clone https://github.com/admanehocine/PlaywrightJenkins.git rep"
                //list files
                sh "ls -la rep"
            
                //list files in current directory
                  dir('rep'){
                    //install dependencies and run tests
                    //install playwright browsers
                    sh "npm ci"
                    //run tests with chromium
                  
                }
            }
        }
        
    }
        stage('Pushplaywright') {
            steps {
                build job: 'jobSmoke'
            }
        }

        stage('Tests API') {
            steps {
                build job: 'jobJenkinsfile2'
            }
        }
    }
